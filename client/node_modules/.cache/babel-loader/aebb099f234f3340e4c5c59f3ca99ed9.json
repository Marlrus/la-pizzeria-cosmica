{"ast":null,"code":"export const ActionTypes = {\n  AGREGAR_INGREDIENTE: 'AGREGAR_INGREDIENTE',\n  REMOVER_INGREDIENTE: 'REMOVER_INGREDIENTE',\n  ACTUALIZAR_PRECIO: 'ACTUALIZAR_PRECIO'\n};\nexport const agregarIngrediente = (nombre, precio) => ({\n  type: ActionTypes.AGREGAR_INGREDIENTE,\n  payload: {\n    nombre,\n    precio\n  }\n});\nexport const removerIngrediente = (nombre, precio) => ({\n  type: ActionTypes.REMOVER_INGREDIENTE,\n  payload: {\n    nombre,\n    precio\n  }\n});\nexport const actualizarPrecio = {\n  type: ActionTypes.ACTUALIZAR_PRECIO\n};\n\nconst precioPizza = ingredientes => {\n  const precio = ingredientes.reduce((total, ingrediente) => total += ingrediente.precio, 0);\n  console.log({\n    precio\n  });\n  return precio;\n};\n\nexport const creadorPizzaReducer = (state, action) => {\n  const {\n    ingredientes,\n    pizza\n  } = state;\n\n  switch (action.type) {\n    case ActionTypes.AGREGAR_INGREDIENTE:\n      {\n        const ingrediente = ingredientes.filter(({\n          nombre\n        }) => nombre === action.payload.nombre);\n        return { ...state,\n          ingredientes: ingredientes.filter(({\n            nombre\n          }) => nombre !== action.payload.nombre),\n          pizza: { ...pizza,\n            ingredientes: [...pizza.ingredientes, ...ingrediente],\n            precio: pizza.precio + action.payload.precio,\n            nombre: `${pizza.nombre}${ingrediente[0].nombre.slice(0, 2)}`\n          }\n        };\n      }\n\n    case ActionTypes.REMOVER_INGREDIENTE:\n      {\n        if (action.payload.nombre === 'masa') return state;\n        const ingrediente = ingredientes.filter(({\n          nombre\n        }) => nombre === action.payload.nombre);\n        return { ...state,\n          ingredientes: [...ingredientes, ...ingrediente],\n          pizza: { ...pizza,\n            ingredientes: pizza.ingredientes.filter(({\n              nombre\n            }) => nombre !== action.payload.nombre),\n            precio: pizza.precio - action.payload.precio\n          }\n        };\n      }\n\n    case ActionTypes.ACTUALIZAR_PRECIO:\n      return { ...state,\n        pizza: { ...pizza,\n          precio: precioPizza(state.pizza.ingredientes)\n        }\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/marlrus/webDev/habi/la-pizzeria-cosmica/src/components/creador-pizza/creador-pizza.reducer.ts"],"names":["ActionTypes","AGREGAR_INGREDIENTE","REMOVER_INGREDIENTE","ACTUALIZAR_PRECIO","agregarIngrediente","nombre","precio","type","payload","removerIngrediente","actualizarPrecio","precioPizza","ingredientes","reduce","total","ingrediente","console","log","creadorPizzaReducer","state","action","pizza","filter","slice"],"mappings":"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","sourcesContent":["import { CreadorPizzaState, Ingrediente } from './pizza.types';\nimport { Reducer } from 'react';\n\nexport const ActionTypes = {\n\tAGREGAR_INGREDIENTE: 'AGREGAR_INGREDIENTE',\n\tREMOVER_INGREDIENTE: 'REMOVER_INGREDIENTE',\n\tACTUALIZAR_PRECIO: 'ACTUALIZAR_PRECIO',\n} as const;\n\nexport const agregarIngrediente = (nombre: string, precio: number) => ({\n\ttype: ActionTypes.AGREGAR_INGREDIENTE,\n\tpayload: { nombre, precio },\n});\n\nexport const removerIngrediente = (nombre: string, precio: number) => ({\n\ttype: ActionTypes.REMOVER_INGREDIENTE,\n\tpayload: { nombre, precio },\n});\n\nexport const actualizarPrecio = {\n\ttype: ActionTypes.ACTUALIZAR_PRECIO,\n};\n\nconst precioPizza = (ingredientes: Ingrediente[]) => {\n\tconst precio = ingredientes.reduce(\n\t\t(total, ingrediente) => (total += ingrediente.precio),\n\t\t0,\n\t);\n\tconsole.log({ precio });\n\treturn precio;\n};\ntype CreadorActions =\n\t| ReturnType<typeof agregarIngrediente>\n\t| ReturnType<typeof removerIngrediente>\n\t| typeof actualizarPrecio;\n\nexport const creadorPizzaReducer: Reducer<CreadorPizzaState, CreadorActions> = (\n\tstate: CreadorPizzaState,\n\taction: CreadorActions,\n) => {\n\tconst { ingredientes, pizza } = state;\n\tswitch (action.type) {\n\t\tcase ActionTypes.AGREGAR_INGREDIENTE: {\n\t\t\tconst ingrediente = ingredientes.filter(\n\t\t\t\t({ nombre }) => nombre === action.payload.nombre,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tingredientes: ingredientes.filter(\n\t\t\t\t\t({ nombre }) => nombre !== action.payload.nombre,\n\t\t\t\t),\n\t\t\t\tpizza: {\n\t\t\t\t\t...pizza,\n\t\t\t\t\tingredientes: [...pizza.ingredientes, ...ingrediente],\n\t\t\t\t\tprecio: pizza.precio + action.payload.precio,\n\t\t\t\t\tnombre: `${pizza.nombre}${ingrediente[0].nombre.slice(0, 2)}`,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tcase ActionTypes.REMOVER_INGREDIENTE: {\n\t\t\tif (action.payload.nombre === 'masa') return state;\n\t\t\tconst ingrediente = ingredientes.filter(\n\t\t\t\t({ nombre }) => nombre === action.payload.nombre,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tingredientes: [...ingredientes, ...ingrediente],\n\t\t\t\tpizza: {\n\t\t\t\t\t...pizza,\n\t\t\t\t\tingredientes: pizza.ingredientes.filter(\n\t\t\t\t\t\t({ nombre }) => nombre !== action.payload.nombre,\n\t\t\t\t\t),\n\t\t\t\t\tprecio: pizza.precio - action.payload.precio,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tcase ActionTypes.ACTUALIZAR_PRECIO:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpizza: {\n\t\t\t\t\t...pizza,\n\t\t\t\t\tprecio: precioPizza(state.pizza.ingredientes),\n\t\t\t\t},\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}